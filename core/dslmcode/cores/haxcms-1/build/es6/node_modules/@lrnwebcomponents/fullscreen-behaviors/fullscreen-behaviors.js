/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as e,html as l,css as n}from"../../lit/index.js";import"./lib/fullscreen-behaviors-manager.js";const FullscreenBehaviors=function(e){return class extends e{static get properties(){return{__fullscreen:{type:Boolean,attribute:"fullscreen"},__fullscreenEnabled:{type:Boolean,attribute:"fullscreen-enabled"}}}render(){return l` <slot></slot> `}constructor(){if(super(),this.__fullscreen=!1,this.__fullscreenEnabled=this.fullscreenManager&&this.fullscreenManager.enabled,this.fullscreenManager.__loaded)this._updateEnabled();else{let callback=()=>{this._updateEnabled(),window.removeEventListener("es-bridge-screenfullLib-loaded",callback.bind(this))};window.addEventListener("es-bridge-screenfullLib-loaded",callback.bind(this))}}disconnectedCallback(){screenfull.off("change",this._updateFullscreen.bind(this)),super.disconnectedCallback()}static get tag(){return"fullscreen-behaviors"}get fullscreenManager(){return window.FullscreenBehaviorsManager.requestAvailability()}get fullscreenTarget(){return this}get fullscreenEnabled(){return this.__fullscreenEnabled}_updateFullscreen(e=screenfull&&screenfull.isFullscreen){let delayedUpdate=e=>{setTimeout(this._updateFullscreen(),500)};this.__fullscreen=e,this.__fullscreen?document.addEventListener("fullscreenchange",delayedUpdate.bind(this)):document.removeEventListener("fullscreenchange",delayedUpdate.bind(this))}_updateEnabled(){this.__fullscreenEnabled=this.fullscreenManager&&this.fullscreenManager.enabled,screenfull&&screenfull.isEnabled&&screenfull.on("change",(e=>this._updateFullscreen.bind(this)))}toggleFullscreen(e=!screenfull.isFullscreen){this.fullscreenEnabled&&screenfull&&(e?screenfull.request(this.fullscreenTarget):screenfull.exit(this.fullscreenTarget),this._updateFullscreen(e))}}};class FullscreenBehaviorsEl extends(FullscreenBehaviors(e)){}window.customElements.define(FullscreenBehaviorsEl.tag,FullscreenBehaviorsEl);export{FullscreenBehaviorsEl,FullscreenBehaviors};