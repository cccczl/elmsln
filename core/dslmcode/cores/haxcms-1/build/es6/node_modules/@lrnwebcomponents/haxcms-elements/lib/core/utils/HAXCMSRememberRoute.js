import{store as e}from"../haxcms-site-store.js";import{autorun as t,toJS as s}from"../../../../../mobx/dist/mobx.esm.js";const HAXCMSRememberRoute=function(o){return class extends o{constructor(){super();const o="Resume where you left off last session?";this.menuOpen=!0,this.__evaluateRoute=!1,this.t?(this.t.resumeMessage=o,this.t.resume="Resume"):this.t={resumeMessage:o,resume:"Resume"},t((t=>{const o=s(e.location.pathname);o&&this.__evaluateRoute&&window.localStorage.setItem("HAXCMSlastRoute",o)}))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),setTimeout((()=>{window.localStorage.getItem("HAXCMSlastRoute")&&window.localStorage.getItem("HAXCMSlastRoute")!=s(e.location.pathname)&&import("../../../../simple-toast/simple-toast.js").then((()=>{window.SimpleToast.requestAvailability();let t=document.createElement("a");t.setAttribute("href",window.localStorage.getItem("HAXCMSlastRoute")),t.addEventListener("click",this.resumeLastRoute.bind(this)),t.innerHTML=`<button>${this.t.resume}</button>`,e.toast(this.t.resumeMessage,4e3,"capsule",null,null,t)})),this.__evaluateRoute=!0}),1e3)}resumeLastRoute(e){window.dispatchEvent(new CustomEvent("simple-toast-hide",{bubbles:!0,composed:!0,cancelable:!1,detail:!1}))}}};export{HAXCMSRememberRoute};