/* @preserve
 * The MIT License (MIT)
 * 
 * Copyright (c) 2013-2015 Petka Antonov
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
!function(O){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=O();else if("function"==typeof define&&define.amd)define([],O);else{var A;"undefined"!=typeof window?A=window:"undefined"!=typeof global?A=global:"undefined"!=typeof self&&(A=self),A.Promise=O()}}((function(){return function r(O,A,D){function i(L,H){if(!A[L]){if(!O[L]){var N="function"==typeof _dereq_&&_dereq_;if(!H&&N)return N(L,!0);if(V)return V(L,!0);var B=new Error("Cannot find module '"+L+"'");throw B.code="MODULE_NOT_FOUND",B}var U=A[L]={exports:{}};O[L][0].call(U.exports,(function(A){var D=O[L][1][A];return i(D||A)}),U,U.exports,r,O,A,D)}return A[L].exports}for(var V="function"==typeof _dereq_&&_dereq_,L=0;L<D.length;L++)i(D[L]);return i}({1:[function(O,A,D){A.exports=function(O){function e(O){var D=new A(O),V=D.promise();return D.setHowMany(1),D.setUnwrap(),D.init(),V}var A=O._SomePromiseArray;O.any=function(O){return e(O)},O.prototype.any=function(){return e(this)}}},{}],2:[function(O,A,D){function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new H(16),this._normalQueue=new H(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var O=this;this.drainQueues=function(){O._drainQueues()},this._schedule=L}function i(O,A,D){this._lateQueue.push(O,A,D),this._queueTick()}function o(O,A,D){this._normalQueue.push(O,A,D),this._queueTick()}function s(O){this._normalQueue._pushOne(O),this._queueTick()}var V;try{throw new Error}catch(O){V=O}var L=O("./schedule"),H=O("./queue"),N=O("./util");r.prototype.setScheduler=function(O){var A=this._schedule;return this._schedule=O,this._customScheduler=!0,A},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){N.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(O,A){A?(process.stderr.write("Fatal "+(O instanceof Error?O.stack:O)+"\n"),process.exit(2)):this.throwLater(O)},r.prototype.throwLater=function(O,A){if(1===arguments.length&&(A=O,O=function(){throw A}),"undefined"!=typeof setTimeout)setTimeout((function(){O(A)}),0);else try{this._schedule((function(){O(A)}))}catch(O){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},N.hasDevTools?(r.prototype.invokeLater=function(O,A,D){this._trampolineEnabled?i.call(this,O,A,D):this._schedule((function(){setTimeout((function(){O.call(A,D)}),100)}))},r.prototype.invoke=function(O,A,D){this._trampolineEnabled?o.call(this,O,A,D):this._schedule((function(){O.call(A,D)}))},r.prototype.settlePromises=function(O){this._trampolineEnabled?s.call(this,O):this._schedule((function(){O._settlePromises()}))}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=s),r.prototype._drainQueue=function(O){for(;O.length()>0;){var A=O.shift();if("function"==typeof A){var D=O.shift(),V=O.shift();A.call(D,V)}else A._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},A.exports=r,A.exports.firstLineError=V},{"./queue":26,"./schedule":29,"./util":36}],3:[function(O,A,D){A.exports=function(O,A,D,V){var L=!1,o=function(O,A){this._reject(A)},s=function(O,A){A.promiseRejectionQueued=!0,A.bindingPromise._then(o,o,null,this,O)},a=function(O,A){0==(50397184&this._bitField)&&this._resolveCallback(A.target)},c=function(O,A){A.promiseRejectionQueued||this._reject(O)};O.prototype.bind=function(H){L||(L=!0,O.prototype._propagateFrom=V.propagateFromFunction(),O.prototype._boundValue=V.boundValueFunction());var N=D(H),B=new O(A);B._propagateFrom(this,1);var U=this._target();if(B._setBoundTo(N),N instanceof O){var M={promiseRejectionQueued:!1,promise:B,target:U,bindingPromise:N};U._then(A,s,void 0,B,M),N._then(a,c,void 0,B,M),B._setOnCancel(N)}else B._resolveCallback(U);return B},O.prototype._setBoundTo=function(O){void 0!==O?(this._bitField=2097152|this._bitField,this._boundTo=O):this._bitField=-2097153&this._bitField},O.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},O.bind=function(A,D){return O.resolve(D).bind(A)}}},{}],4:[function(O,A,D){var V;"undefined"!=typeof Promise&&(V=Promise);var L=O("./promise")();L.noConflict=function r(){try{Promise===L&&(Promise=V)}catch(O){}return L},A.exports=L},{"./promise":22}],5:[function(O,A,D){var V=Object.create;if(V){var L=V(null),H=V(null);L[" size"]=H[" size"]=0}A.exports=function(A){function n(O,V){var L;if(null!=O&&(L=O[V]),"function"!=typeof L){var H="Object "+D.classString(O)+" has no method '"+D.toString(V)+"'";throw new A.TypeError(H)}return L}function r(O){return n(O,this.pop()).apply(O,this)}function i(O){return O[this]}function o(O){var A=+this;return 0>A&&(A=Math.max(0,A+O.length)),O[A]}var D=O("./util"),V=D.canEvaluate;D.isIdentifier,A.prototype.call=function(O){var A=[].slice.call(arguments,1);return A.push(O),this._then(r,void 0,void 0,A,void 0)},A.prototype.get=function(O){var A;if("number"==typeof O)A=o;else if(V){var D=undefined(O);A=null!==D?D:i}else A=i;return this._then(A,void 0,void 0,O,void 0)}}},{"./util":36}],6:[function(O,A,D){A.exports=function(A,D,V,L){var H=O("./util"),N=H.tryCatch,B=H.errorObj,U=A._async;A.prototype.break=A.prototype.cancel=function(){if(!L.cancellation())return this._warn("cancellation is disabled");for(var O=this,A=O;O._isCancellable();){if(!O._cancelBy(A)){A._isFollowing()?A._followee().cancel():A._cancelBranched();break}var D=O._cancellationParent;if(null==D||!D._isCancellable()){O._isFollowing()?O._followee().cancel():O._cancelBranched();break}O._isFollowing()&&O._followee().cancel(),O._setWillBeCancelled(),A=O,O=D}},A.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},A.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},A.prototype._cancelBy=function(O){return O===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},A.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},A.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),U.invoke(this._cancelPromises,this,void 0))},A.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},A.prototype._unsetOnCancel=function(){this._onCancelField=void 0},A.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},A.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},A.prototype._doInvokeOnCancel=function(O,A){if(H.isArray(O))for(var D=0;D<O.length;++D)this._doInvokeOnCancel(O[D],A);else if(void 0!==O)if("function"==typeof O){if(!A){var V=N(O).call(this._boundValue());V===B&&(this._attachExtraTrace(V.e),U.throwLater(V.e))}}else O._resultCancelled(this)},A.prototype._invokeOnCancel=function(){var O=this._onCancel();this._unsetOnCancel(),U.invoke(this._doInvokeOnCancel,this,O)},A.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},A.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(O,A,D){A.exports=function(A){var D=O("./util"),V=O("./es5").keys,L=D.tryCatch,H=D.errorObj;return function n(O,N,B){return function(U){var M=B._boundValue();t:for(var q=0;q<O.length;++q){var Q=O[q];if(Q===Error||null!=Q&&Q.prototype instanceof Error){if(U instanceof Q)return L(N).call(M,U)}else if("function"==typeof Q){var $=L(Q).call(M,U);if($===H)return $;if($)return L(N).call(M,U)}else if(D.isObject(U)){for(var G=V(Q),z=0;z<G.length;++z){var X=G[z];if(Q[X]!=U[X])continue t}return L(N).call(M,U)}}return A}}}},{"./es5":13,"./util":36}],8:[function(O,A,D){A.exports=function(O){function e(){this._trace=new e.CapturedTrace(r())}function r(){var O=D.length-1;return O>=0?D[O]:void 0}var A=!1,D=[];return O.prototype._promiseCreated=function(){},O.prototype._pushContext=function(){},O.prototype._popContext=function(){return null},O._peekContext=O.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,D.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var O=D.pop(),A=O._promiseCreated;return O._promiseCreated=null,A}return null},e.CapturedTrace=null,e.create=function n(){return A?new e:void 0},e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var D=O.prototype._pushContext,V=O.prototype._popContext,L=O._peekContext,H=O.prototype._peekContext,N=O.prototype._promiseCreated;e.deactivateLongStackTraces=function(){O.prototype._pushContext=D,O.prototype._popContext=V,O._peekContext=L,O.prototype._peekContext=H,O.prototype._promiseCreated=N,A=!1},A=!0,O.prototype._pushContext=e.prototype._pushContext,O.prototype._popContext=e.prototype._popContext,O._peekContext=O.prototype._peekContext=r,O.prototype._promiseCreated=function(){var O=this._peekContext();O&&null==O._promiseCreated&&(O._promiseCreated=this)}},e}},{}],9:[function(O,A,D){A.exports=function(A,D){function r(O,A){return{promise:A}}function i(){return!1}function o(O,A,D){var V=this;try{O(A,D,(function(O){if("function"!=typeof O)throw new TypeError("onCancel must be a function, got: "+M.toString(O));V._attachCancellationCallback(O)}))}catch(O){return O}}function s(O){if(!this._isCancellable())return this;var A=this._onCancel();void 0!==A?M.isArray(A)?A.push(O):this._setOnCancel([A,O]):this._setOnCancel(O)}function a(){return this._onCancelField}function c(O){this._onCancelField=O}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function u(O,A){if(0!=(1&A)){this._cancellationParent=O;var D=O._branchesRemainingToCancel;void 0===D&&(D=0),O._branchesRemainingToCancel=D+1}0!=(2&A)&&O._isBound()&&this._setBoundTo(O._boundTo)}function h(){var O=this._boundTo;return void 0!==O&&O instanceof A?O.isFulfilled()?O.value():void 0:O}function f(){this._trace=new S(this._peekContext())}function _(O,A){if(q(O)){var D=this._trace;if(void 0!==D&&A&&(D=D._parent),void 0!==D)D.attachExtraTrace(O);else if(!O.__stackCleaned__){var V=j(O);M.notEnumerableProp(O,"stack",V.message+"\n"+V.stack.join("\n")),M.notEnumerableProp(O,"__stackCleaned__",!0)}}}function y(O,D,V){if(lt.warnings){var L,H=new U(O);if(D)V._attachExtraTrace(H);else if(lt.longStackTraces&&(L=A._peekContext()))L.attachExtraTrace(H);else{var N=j(H);H.stack=N.message+"\n"+N.stack.join("\n")}tt("warning",H)||E(H,"",!0)}}function w(O){for(var A=[],D=0;D<O.length;++D){var V=O[D],L="    (No stack trace)"===V||z.test(V),H=L&&nt(V);L&&!H&&(W&&" "!==V.charAt(0)&&(V="    "+V),A.push(V))}return A}function j(O){var A=O.stack,D=O.toString();return A="string"==typeof A&&A.length>0?function C(O){for(var A=O.stack.replace(/\s+$/g,"").split("\n"),D=0;D<A.length;++D){var V=A[D];if("    (No stack trace)"===V||z.test(V))break}return D>0&&"SyntaxError"!=O.name&&(A=A.slice(D)),A}(O):["    (No stack trace)"],{message:D,stack:"SyntaxError"==O.name?A:w(A)}}function E(O,A,D){if("undefined"!=typeof console){var V;if(M.isObject(O)){var L=O.stack;V=A+X(L,O)}else V=A+String(O);"function"==typeof H?H(V,D):("function"==typeof console.log||"object"==typeof console.log)&&console.log(V)}}function k(O,A,D,V){var L=!1;try{"function"==typeof A&&(L=!0,"rejectionHandled"===O?A(V):A(D,V))}catch(O){B.throwLater(O)}"unhandledRejection"===O?tt(O,D,V)||L||E(D,"Unhandled rejection "):tt(O,V)}function F(O){var A;if("function"==typeof O)A="[function "+(O.name||"anonymous")+"]";else{A=O&&"function"==typeof O.toString?O.toString():M.toString(O);if(/\[object [a-zA-Z0-9$_]+\]/.test(A))try{A=JSON.stringify(O)}catch(O){}0===A.length&&(A="(empty array)")}return"(<"+function x(O){var A=41;return O.length<A?O:O.substr(0,A-3)+"..."}(A)+">, no stack trace)"}function T(){return"function"==typeof ct}function P(O){var A=O.match(at);return A?{fileName:A[1],line:parseInt(A[2],10)}:void 0}function S(O){this._parent=O,this._promisesCreated=0;var A=this._length=1+(void 0===O?0:O._length);ct(this,S),A>32&&this.uncycle()}var V,L,H,N=A._getDomain,B=A._async,U=O("./errors").Warning,M=O("./util"),q=M.canAttachTrace,Q=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,$=/\((?:timers\.js):\d+:\d+\)/,G=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,z=null,X=null,W=!1,J=!(0==M.env("BLUEBIRD_DEBUG")||!M.env("BLUEBIRD_DEBUG")&&"development"!==M.env("NODE_ENV")),Y=!(0==M.env("BLUEBIRD_WARNINGS")||!J&&!M.env("BLUEBIRD_WARNINGS")),Z=!(0==M.env("BLUEBIRD_LONG_STACK_TRACES")||!J&&!M.env("BLUEBIRD_LONG_STACK_TRACES")),et=0!=M.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(Y||!!M.env("BLUEBIRD_W_FORGOTTEN_RETURN"));A.prototype.suppressUnhandledRejections=function(){var O=this._target();O._bitField=-1048577&O._bitField|524288},A.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),B.invokeLater(this._notifyUnhandledRejection,this,void 0))},A.prototype._notifyUnhandledRejectionIsHandled=function(){k("rejectionHandled",V,void 0,this)},A.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},A.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},A.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var O=this._settledValue();this._setUnhandledRejectionIsNotified(),k("unhandledRejection",L,O,this)}},A.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},A.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},A.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},A.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},A.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},A.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},A.prototype._warn=function(O,A,D){return y(O,A,D||this)},A.onPossiblyUnhandledRejection=function(O){var A=N();L="function"==typeof O?null===A?O:M.domainBind(A,O):void 0},A.onUnhandledRejectionHandled=function(O){var A=N();V="function"==typeof O?null===A?O:M.domainBind(A,O):void 0};var K=function(){};A.longStackTraces=function(){if(B.haveItemsQueued()&&!lt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!lt.longStackTraces&&T()){var O=A.prototype._captureStackTrace,V=A.prototype._attachExtraTrace;lt.longStackTraces=!0,K=function(){if(B.haveItemsQueued()&&!lt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");A.prototype._captureStackTrace=O,A.prototype._attachExtraTrace=V,D.deactivateLongStackTraces(),B.enableTrampoline(),lt.longStackTraces=!1},A.prototype._captureStackTrace=f,A.prototype._attachExtraTrace=_,D.activateLongStackTraces(),B.disableTrampolineIfNecessary()}},A.hasLongStackTraces=function(){return lt.longStackTraces&&T()};var rt=function(){try{if("function"==typeof CustomEvent){var O=new CustomEvent("CustomEvent");return M.global.dispatchEvent(O),function(O,A){var D=new CustomEvent(O.toLowerCase(),{detail:A,cancelable:!0});return!M.global.dispatchEvent(D)}}if("function"==typeof Event){O=new Event("CustomEvent");return M.global.dispatchEvent(O),function(O,A){var D=new Event(O.toLowerCase(),{cancelable:!0});return D.detail=A,!M.global.dispatchEvent(D)}}return(O=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),M.global.dispatchEvent(O),function(O,A){var D=document.createEvent("CustomEvent");return D.initCustomEvent(O.toLowerCase(),!1,!0,A),!M.global.dispatchEvent(D)}}catch(O){}return function(){return!1}}(),it=M.isNode?function(){return process.emit.apply(process,arguments)}:M.global?function(O){var A="on"+O.toLowerCase(),D=M.global[A];return!!D&&(D.apply(M.global,[].slice.call(arguments,1)),!0)}:function(){return!1},ot={promiseCreated:r,promiseFulfilled:r,promiseRejected:r,promiseResolved:r,promiseCancelled:r,promiseChained:function(O,A,D){return{promise:A,child:D}},warning:function(O,A){return{warning:A}},unhandledRejection:function(O,A,D){return{reason:A,promise:D}},rejectionHandled:r},tt=function(O){var A=!1;try{A=it.apply(null,arguments)}catch(O){B.throwLater(O),A=!0}var D=!1;try{D=rt(O,ot[O].apply(null,arguments))}catch(O){B.throwLater(O),D=!0}return D||A};A.config=function(O){if("longStackTraces"in(O=Object(O))&&(O.longStackTraces?A.longStackTraces():!O.longStackTraces&&A.hasLongStackTraces()&&K()),"warnings"in O){var D=O.warnings;lt.warnings=!!D,et=lt.warnings,M.isObject(D)&&"wForgottenReturn"in D&&(et=!!D.wForgottenReturn)}if("cancellation"in O&&O.cancellation&&!lt.cancellation){if(B.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");A.prototype._clearCancellationData=l,A.prototype._propagateFrom=u,A.prototype._onCancel=a,A.prototype._setOnCancel=c,A.prototype._attachCancellationCallback=s,A.prototype._execute=o,st=u,lt.cancellation=!0}return"monitoring"in O&&(O.monitoring&&!lt.monitoring?(lt.monitoring=!0,A.prototype._fireEvent=tt):!O.monitoring&&lt.monitoring&&(lt.monitoring=!1,A.prototype._fireEvent=i)),A},A.prototype._fireEvent=i,A.prototype._execute=function(O,A,D){try{O(A,D)}catch(O){return O}},A.prototype._onCancel=function(){},A.prototype._setOnCancel=function(O){},A.prototype._attachCancellationCallback=function(O){},A.prototype._captureStackTrace=function(){},A.prototype._attachExtraTrace=function(){},A.prototype._clearCancellationData=function(){},A.prototype._propagateFrom=function(O,A){};var st=function p(O,A){0!=(2&A)&&O._isBound()&&this._setBoundTo(O._boundTo)},nt=function(){return!1},at=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;M.inherits(S,Error),D.CapturedTrace=S,S.prototype.uncycle=function(){var O=this._length;if(!(2>O)){for(var A=[],D={},V=0,L=this;void 0!==L;++V)A.push(L),L=L._parent;for(V=(O=this._length=V)-1;V>=0;--V){var H=A[V].stack;void 0===D[H]&&(D[H]=V)}for(V=0;O>V;++V){var N=D[A[V].stack];if(void 0!==N&&N!==V){N>0&&(A[N-1]._parent=void 0,A[N-1]._length=1),A[V]._parent=void 0,A[V]._length=1;var B=V>0?A[V-1]:this;O-1>N?(B._parent=A[N+1],B._parent.uncycle(),B._length=B._parent._length+1):(B._parent=void 0,B._length=1);for(var U=B._length+1,M=V-2;M>=0;--M)A[M]._length=U,U++;return}}}},S.prototype.attachExtraTrace=function(O){if(!O.__stackCleaned__){this.uncycle();for(var A=j(O),D=A.message,V=[A.stack],L=this;void 0!==L;)V.push(w(L.stack.split("\n"))),L=L._parent;(function b(O){for(var A=O[0],D=1;D<O.length;++D){for(var V=O[D],L=A.length-1,H=A[L],N=-1,B=V.length-1;B>=0;--B)if(V[B]===H){N=B;break}for(B=N;B>=0;--B){var U=V[B];if(A[L]!==U)break;A.pop(),L--}A=V}})(V),function g(O){for(var A=0;A<O.length;++A)(0===O[A].length||A+1<O.length&&O[A][0]===O[A+1][0])&&(O.splice(A,1),A--)}(V),M.notEnumerableProp(O,"stack",function m(O,A){for(var D=0;D<A.length-1;++D)A[D].push("From previous event:"),A[D]=A[D].join("\n");return D<A.length&&(A[D]=A[D].join("\n")),O+"\n"+A.join("\n")}(D,V)),M.notEnumerableProp(O,"__stackCleaned__",!0)}};var ct=function(){var O=/^\s*at\s*/,e=function(O,A){return"string"==typeof O?O:void 0!==A.name&&void 0!==A.message?A.toString():F(A)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,z=O,X=e;var A=Error.captureStackTrace;return nt=function(O){return Q.test(O)},function(O,D){Error.stackTraceLimit+=6,A(O,D),Error.stackTraceLimit-=6}}var D,V=new Error;if("string"==typeof V.stack&&V.stack.split("\n")[0].indexOf("stackDetection@")>=0)return z=/@/,X=e,W=!0,function(O){O.stack=(new Error).stack};try{throw new Error}catch(O){D="stack"in O}return"stack"in V||!D||"number"!=typeof Error.stackTraceLimit?(X=function(O,A){return"string"==typeof O?O:"object"!=typeof A&&"function"!=typeof A||void 0===A.name||void 0===A.message?F(A):A.toString()},null):(z=O,X=e,function(O){Error.stackTraceLimit+=6;try{throw new Error}catch(A){O.stack=A.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(H=function(O){console.warn(O)},M.isNode&&process.stderr.isTTY?H=function(O,A){var D=A?"[33m":"[31m";console.warn(D+O+"[0m\n")}:M.isNode||"string"!=typeof(new Error).stack||(H=function(O,A){console.warn("%c"+O,A?"color: darkorange":"color: red")}));var lt={warnings:Y,longStackTraces:!1,cancellation:!1,monitoring:!1};return Z&&A.longStackTraces(),{longStackTraces:function(){return lt.longStackTraces},warnings:function(){return lt.warnings},cancellation:function(){return lt.cancellation},monitoring:function(){return lt.monitoring},propagateFromFunction:function(){return st},boundValueFunction:function(){return h},checkForgottenReturns:function d(O,A,D,V,L){if(void 0===O&&null!==A&&et){if(void 0!==L&&L._returnedNonUndefined())return;if(0==(65535&V._bitField))return;D&&(D+=" ");var H="",N="";if(A._trace){for(var B=A._trace.stack.split("\n"),U=w(B),M=U.length-1;M>=0;--M){var q=U[M];if(!$.test(q)){var Q=q.match(G);Q&&(H="at "+Q[1]+":"+Q[2]+":"+Q[3]+" ");break}}if(U.length>0){var z=U[0];for(M=0;M<B.length;++M)if(B[M]===z){M>0&&(N="\n"+B[M-1]);break}}}var X="a promise was created in a "+D+"handler "+H+"but was not returned from it, see http://goo.gl/rRqMUw"+N;V._warn(X,!0,A)}},setBounds:function R(O,A){if(T()){for(var D,V,L=O.stack.split("\n"),H=A.stack.split("\n"),N=-1,B=-1,U=0;U<L.length;++U){if(M=P(L[U])){D=M.fileName,N=M.line;break}}for(U=0;U<H.length;++U){var M;if(M=P(H[U])){V=M.fileName,B=M.line;break}}0>N||0>B||!D||!V||D!==V||N>=B||(nt=function(O){if(Q.test(O))return!0;var A=P(O);return!!(A&&A.fileName===D&&N<=A.line&&A.line<=B)})}},warn:y,deprecated:function v(O,A){var D=O+" is deprecated and will be removed in a future version.";return A&&(D+=" Use "+A+" instead."),y(D)},CapturedTrace:S,fireDomEvent:rt,fireGlobalEvent:it}}},{"./errors":12,"./util":36}],10:[function(O,A,D){A.exports=function(O){function e(){return this.value}function n(){throw this.reason}O.prototype.return=O.prototype.thenReturn=function(A){return A instanceof O&&A.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:A},void 0)},O.prototype.throw=O.prototype.thenThrow=function(O){return this._then(n,void 0,void 0,{reason:O},void 0)},O.prototype.catchThrow=function(O){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:O},void 0);var A=arguments[1],r=function(){throw A};return this.caught(O,r)},O.prototype.catchReturn=function(A){if(arguments.length<=1)return A instanceof O&&A.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:A},void 0);var D=arguments[1];D instanceof O&&D.suppressUnhandledRejections();var i=function(){return D};return this.caught(A,i)}}},{}],11:[function(O,A,D){A.exports=function(O,A){function n(){return V(this)}var D=O.reduce,V=O.all;O.prototype.each=function(O){return D(this,O,A,0)._then(n,void 0,void 0,this,void 0)},O.prototype.mapSeries=function(O){return D(this,O,A,A)},O.each=function(O,V){return D(O,V,A,0)._then(n,void 0,void 0,O,void 0)},O.mapSeries=function r(O,V){return D(O,V,A,A)}}},{}],12:[function(O,A,D){function r(O,A){function n(D){return this instanceof n?(M(this,"message","string"==typeof D?D:A),M(this,"name",O),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(D)}return U(n,Error),n}function i(O){return this instanceof i?(M(this,"name","OperationalError"),M(this,"message",O),this.cause=O,this.isOperational=!0,void(O instanceof Error?(M(this,"message",O.message),M(this,"stack",O.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(O)}var V,L,H=O("./es5"),N=H.freeze,B=O("./util"),U=B.inherits,M=B.notEnumerableProp,q=r("Warning","warning"),Q=r("CancellationError","cancellation error"),$=r("TimeoutError","timeout error"),G=r("AggregateError","aggregate error");try{V=TypeError,L=RangeError}catch(O){V=r("TypeError","type error"),L=r("RangeError","range error")}for(var z="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),X=0;X<z.length;++X)"function"==typeof Array.prototype[z[X]]&&(G.prototype[z[X]]=Array.prototype[z[X]]);H.defineProperty(G.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),G.prototype.isOperational=!0;var W=0;G.prototype.toString=function(){var O=Array(4*W+1).join(" "),A="\n"+O+"AggregateError of:\n";W++,O=Array(4*W+1).join(" ");for(var D=0;D<this.length;++D){for(var V=this[D]===this?"[Circular AggregateError]":this[D]+"",L=V.split("\n"),H=0;H<L.length;++H)L[H]=O+L[H];A+=(V=L.join("\n"))+"\n"}return W--,A},U(i,Error);var J=Error.__BluebirdErrorTypes__;J||(J=N({CancellationError:Q,TimeoutError:$,OperationalError:i,RejectionError:i,AggregateError:G}),H.defineProperty(Error,"__BluebirdErrorTypes__",{value:J,writable:!1,enumerable:!1,configurable:!1})),A.exports={Error,TypeError:V,RangeError:L,CancellationError:J.CancellationError,OperationalError:J.OperationalError,TimeoutError:J.TimeoutError,AggregateError:J.AggregateError,Warning:q}},{"./es5":13,"./util":36}],13:[function(O,A,D){var V=function(){return void 0===this}();if(V)A.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:V,propertyIsWritable:function(O,A){var D=Object.getOwnPropertyDescriptor(O,A);return!(D&&!D.writable&&!D.set)}};else{var L={}.hasOwnProperty,H={}.toString,N={}.constructor.prototype,a=function(O){var A=[];for(var D in O)L.call(O,D)&&A.push(D);return A};A.exports={isArray:function(O){try{return"[object Array]"===H.call(O)}catch(O){return!1}},keys:a,names:a,defineProperty:function(O,A,D){return O[A]=D.value,O},getDescriptor:function(O,A){return{value:O[A]}},freeze:function(O){return O},getPrototypeOf:function(O){try{return Object(O).constructor.prototype}catch(O){return N}},isES5:V,propertyIsWritable:function(){return!0}}}},{}],14:[function(O,A,D){A.exports=function(O,A){var D=O.map;O.prototype.filter=function(O,V){return D(this,O,V,A)},O.filter=function(O,V,L){return D(O,V,L,A)}}},{}],15:[function(O,A,D){A.exports=function(A,D){function r(O,A,D){this.promise=O,this.type=A,this.handler=D,this.called=!1,this.cancelPromise=null}function i(O){this.finallyHandler=O}function o(O,A){return null!=O.cancelPromise&&(arguments.length>1?O.cancelPromise._reject(A):O.cancelPromise._cancel(),O.cancelPromise=null,!0)}function s(){return c.call(this,this.promise._target()._settledValue())}function a(O){return o(this,O)?void 0:(H.e=O,H)}function c(O){var V=this.promise,N=this.handler;if(!this.called){this.called=!0;var B=this.isFinallyHandler()?N.call(V._boundValue()):N.call(V._boundValue(),O);if(void 0!==B){V._setReturnedNonUndefined();var U=D(B,V);if(U instanceof A){if(null!=this.cancelPromise){if(U._isCancelled()){var M=new L("late cancellation observer");return V._attachExtraTrace(M),H.e=M,H}U.isPending()&&U._attachCancellationCallback(new i(this))}return U._then(s,a,void 0,this,void 0)}}}return V.isRejected()?(o(this),H.e=O,H):(o(this),O)}var V=O("./util"),L=A.CancellationError,H=V.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},A.prototype._passThrough=function(O,A,D,V){return"function"!=typeof O?this.then():this._then(D,V,void 0,new r(this,A,O),void 0)},A.prototype.lastly=A.prototype.finally=function(O){return this._passThrough(O,0,c,c)},A.prototype.tap=function(O){return this._passThrough(O,1,c)},r}},{"./util":36}],16:[function(O,A,D){A.exports=function(A,D,V,L,H,N){function c(O,D,L,H){if(N.cancellation()){var B=new A(V),U=this._finallyPromise=new A(V);this._promise=B.lastly((function(){return U})),B._captureStackTrace(),B._setOnCancel(this)}else{(this._promise=new A(V))._captureStackTrace()}this._stack=H,this._generatorFunction=O,this._receiver=D,this._generator=void 0,this._yieldHandlers="function"==typeof L?[L].concat(Q):Q,this._yieldedPromise=null,this._cancellationPhase=!1}var B=O("./errors").TypeError,U=O("./util"),M=U.errorObj,q=U.tryCatch,Q=[];U.inherits(c,H),c.prototype._isResolved=function(){return null===this._promise},c.prototype._cleanup=function(){this._promise=this._generator=null,N.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},c.prototype._promiseCancelled=function(){if(!this._isResolved()){var O;if(void 0!==this._generator.return)this._promise._pushContext(),O=q(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var D=new A.CancellationError("generator .return() sentinel");A.coroutine.returnSentinel=D,this._promise._attachExtraTrace(D),this._promise._pushContext(),O=q(this._generator.throw).call(this._generator,D),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(O)}},c.prototype._promiseFulfilled=function(O){this._yieldedPromise=null,this._promise._pushContext();var A=q(this._generator.next).call(this._generator,O);this._promise._popContext(),this._continue(A)},c.prototype._promiseRejected=function(O){this._yieldedPromise=null,this._promise._attachExtraTrace(O),this._promise._pushContext();var A=q(this._generator.throw).call(this._generator,O);this._promise._popContext(),this._continue(A)},c.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof A){var O=this._yieldedPromise;this._yieldedPromise=null,O.cancel()}},c.prototype.promise=function(){return this._promise},c.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},c.prototype._continue=function(O){var D=this._promise;if(O===M)return this._cleanup(),this._cancellationPhase?D.cancel():D._rejectCallback(O.e,!1);var V=O.value;if(!0===O.done)return this._cleanup(),this._cancellationPhase?D.cancel():D._resolveCallback(V);var H=L(V,this._promise);if(H instanceof A||null!==(H=function a(O,D,V){for(var H=0;H<D.length;++H){V._pushContext();var N=q(D[H])(O);if(V._popContext(),N===M){V._pushContext();var B=A.reject(M.e);return V._popContext(),B}var U=L(N,V);if(U instanceof A)return U}return null}(H,this._yieldHandlers,this._promise))){var N=(H=H._target())._bitField;0==(50397184&N)?(this._yieldedPromise=H,H._proxy(this,null)):0!=(33554432&N)?A._async.invoke(this._promiseFulfilled,this,H._value()):0!=(16777216&N)?A._async.invoke(this._promiseRejected,this,H._reason()):this._promiseCancelled()}else this._promiseRejected(new B("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",V)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},A.coroutine=function(O,A){if("function"!=typeof O)throw new B("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var D=Object(A).yieldHandler,V=c,L=(new Error).stack;return function(){var A=O.apply(this,arguments),H=new V(void 0,void 0,D,L),N=H.promise();return H._generator=A,H._promiseFulfilled(void 0),N}},A.coroutine.addYieldHandler=function(O){if("function"!=typeof O)throw new B("expecting a function but got "+U.classString(O));Q.push(O)},A.spawn=function(O){if(N.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof O)return D("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var V=new c(O,this),L=V.promise();return V._run(A.spawn),L}}},{"./errors":12,"./util":36}],17:[function(O,A,D){A.exports=function(A,D,V,L,H,N){var B=O("./util");B.canEvaluate,B.tryCatch,B.errorObj,A.join=function(){var O,A=arguments.length-1;A>0&&"function"==typeof arguments[A]&&(O=arguments[A]);var V=[].slice.call(arguments);O&&V.pop();var L=new D(V).promise();return void 0!==O?L.spread(O):L}}},{"./util":36}],18:[function(O,A,D){A.exports=function(A,D,V,L,H,N){function a(O,A,D,V){this.constructor$(O),this._promise._captureStackTrace();var L=B();this._callback=null===L?A:U.domainBind(L,A),this._preservedValues=V===H?new Array(this.length()):null,this._limit=D,this._inFlight=0,this._queue=[],Q.invoke(this._asyncInit,this,void 0)}function c(O,D,L,H){if("function"!=typeof D)return V("expecting a function but got "+U.classString(D));var N=0;if(void 0!==L){if("object"!=typeof L||null===L)return A.reject(new TypeError("options argument must be an object but it is "+U.classString(L)));if("number"!=typeof L.concurrency)return A.reject(new TypeError("'concurrency' must be a number but it is "+U.classString(L.concurrency)));N=L.concurrency}return new a(O,D,N="number"==typeof N&&isFinite(N)&&N>=1?N:0,H).promise()}var B=A._getDomain,U=O("./util"),M=U.tryCatch,q=U.errorObj,Q=A._async;U.inherits(a,D),a.prototype._asyncInit=function(){this._init$(void 0,-2)},a.prototype._init=function(){},a.prototype._promiseFulfilled=function(O,D){var V=this._values,H=this.length(),B=this._preservedValues,U=this._limit;if(0>D){if(V[D=-1*D-1]=O,U>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(U>=1&&this._inFlight>=U)return V[D]=O,this._queue.push(D),!1;null!==B&&(B[D]=O);var Q=this._promise,$=this._callback,G=Q._boundValue();Q._pushContext();var z=M($).call(G,O,D,H),X=Q._popContext();if(N.checkForgottenReturns(z,X,null!==B?"Promise.filter":"Promise.map",Q),z===q)return this._reject(z.e),!0;var W=L(z,this._promise);if(W instanceof A){var J=(W=W._target())._bitField;if(0==(50397184&J))return U>=1&&this._inFlight++,V[D]=W,W._proxy(this,-1*(D+1)),!1;if(0==(33554432&J))return 0!=(16777216&J)?(this._reject(W._reason()),!0):(this._cancel(),!0);z=W._value()}V[D]=z}return++this._totalResolved>=H&&(null!==B?this._filter(V,B):this._resolve(V),!0)},a.prototype._drainQueue=function(){for(var O=this._queue,A=this._limit,D=this._values;O.length>0&&this._inFlight<A;){if(this._isResolved())return;var V=O.pop();this._promiseFulfilled(D[V],V)}},a.prototype._filter=function(O,A){for(var D=A.length,V=new Array(D),L=0,H=0;D>H;++H)O[H]&&(V[L++]=A[H]);V.length=L,this._resolve(V)},a.prototype.preservedValues=function(){return this._preservedValues},A.prototype.map=function(O,A){return c(this,O,A,null)},A.map=function(O,A,D,V){return c(O,A,D,V)}}},{"./util":36}],19:[function(O,A,D){A.exports=function(A,D,V,L,H){var N=O("./util"),B=N.tryCatch;A.method=function(O){if("function"!=typeof O)throw new A.TypeError("expecting a function but got "+N.classString(O));return function(){var V=new A(D);V._captureStackTrace(),V._pushContext();var L=B(O).apply(this,arguments),N=V._popContext();return H.checkForgottenReturns(L,N,"Promise.method",V),V._resolveFromSyncValue(L),V}},A.attempt=A.try=function(O){if("function"!=typeof O)return L("expecting a function but got "+N.classString(O));var V,U=new A(D);if(U._captureStackTrace(),U._pushContext(),arguments.length>1){H.deprecated("calling Promise.try with more than 1 argument");var M=arguments[1],q=arguments[2];V=N.isArray(M)?B(O).apply(q,M):B(O).call(q,M)}else V=B(O)();var Q=U._popContext();return H.checkForgottenReturns(V,Q,"Promise.try",U),U._resolveFromSyncValue(V),U},A.prototype._resolveFromSyncValue=function(O){O===N.errorObj?this._rejectCallback(O.e,!1):this._resolveCallback(O,!0)}}},{"./util":36}],20:[function(O,A,D){function i(O){var A;if(function r(O){return O instanceof Error&&N.getPrototypeOf(O)===Error.prototype}(O)){(A=new H(O)).name=O.name,A.message=O.message,A.stack=O.stack;for(var D=N.keys(O),L=0;L<D.length;++L){var U=D[L];B.test(U)||(A[U]=O[U])}return A}return V.markAsOriginatingFromRejection(O),O}var V=O("./util"),L=V.maybeWrapAsError,H=O("./errors").OperationalError,N=O("./es5"),B=/^(?:name|message|stack|cause)$/;A.exports=function o(O,A){return function(D,V){if(null!==O){if(D){var H=i(L(D));O._attachExtraTrace(H),O._reject(H)}else if(A){var N=[].slice.call(arguments,1);O._fulfill(N)}else O._fulfill(V);O=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(O,A,D){A.exports=function(A){function n(O,A){if(!D.isArray(O))return r.call(this,O,A);var N=L(A).apply(this._boundValue(),[null].concat(O));N===H&&V.throwLater(N.e)}function r(O,A){var D=this._boundValue(),N=void 0===O?L(A).call(D,null):L(A).call(D,null,O);N===H&&V.throwLater(N.e)}function i(O,A){if(!O){var D=new Error(O+"");D.cause=O,O=D}var N=L(A).call(this._boundValue(),O);N===H&&V.throwLater(N.e)}var D=O("./util"),V=A._async,L=D.tryCatch,H=D.errorObj;A.prototype.asCallback=A.prototype.nodeify=function(O,A){if("function"==typeof O){var D=r;void 0!==A&&Object(A).spread&&(D=n),this._then(D,i,void 0,this,O)}return this}}},{"./util":36}],22:[function(O,A,D){A.exports=function(){function n(){}function i(O){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,O!==b&&(function r(O,A){if("function"!=typeof A)throw new M("expecting a function but got "+L.classString(A));if(O.constructor!==i)throw new M("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}(this,O),this._resolveFromExecutor(O)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function o(O){this.promise._resolveCallback(O)}function s(O){this.promise._rejectCallback(O,!1)}function a(O){var A=new i(b);A._fulfillmentHandler0=O,A._rejectionHandler0=O,A._promise0=O,A._receiver0=O}var D,l=function(){return new M("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},u=function(){return new i.PromiseInspection(this._target())},p=function(O){return i.reject(new M(O))},V={},L=O("./util");D=L.isNode?function(){var O=process.domain;return void 0===O&&(O=null),O}:function(){return null},L.notEnumerableProp(i,"_getDomain",D);var H=O("./es5"),N=O("./async"),B=new N;H.defineProperty(i,"_async",{value:B});var U=O("./errors"),M=i.TypeError=U.TypeError;i.RangeError=U.RangeError;var q=i.CancellationError=U.CancellationError;i.TimeoutError=U.TimeoutError,i.OperationalError=U.OperationalError,i.RejectionError=U.OperationalError,i.AggregateError=U.AggregateError;var b=function(){},Q={},$={},G=O("./thenables")(i,b),z=O("./promise_array")(i,b,G,p,n),X=O("./context")(i),W=X.create,J=O("./debuggability")(i,X),Y=(J.CapturedTrace,O("./finally")(i,G)),Z=O("./catch_filter")($),et=O("./nodeback"),rt=L.errorObj,it=L.tryCatch;return i.prototype.toString=function(){return"[object Promise]"},i.prototype.caught=i.prototype.catch=function(O){var A=arguments.length;if(A>1){var D,V=new Array(A-1),H=0;for(D=0;A-1>D;++D){var N=arguments[D];if(!L.isObject(N))return p("expecting an object but got A catch statement predicate "+L.classString(N));V[H++]=N}return V.length=H,O=arguments[D],this.then(void 0,Z(V,O,this))}return this.then(void 0,O)},i.prototype.reflect=function(){return this._then(u,u,void 0,this,void 0)},i.prototype.then=function(O,A){if(J.warnings()&&arguments.length>0&&"function"!=typeof O&&"function"!=typeof A){var D=".then() only accepts functions but was passed: "+L.classString(O);arguments.length>1&&(D+=", "+L.classString(A)),this._warn(D)}return this._then(O,A,void 0,void 0,void 0)},i.prototype.done=function(O,A){this._then(O,A,void 0,void 0,void 0)._setIsFinal()},i.prototype.spread=function(O){return"function"!=typeof O?p("expecting a function but got "+L.classString(O)):this.all()._then(O,void 0,void 0,Q,void 0)},i.prototype.toJSON=function(){var O={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(O.fulfillmentValue=this.value(),O.isFulfilled=!0):this.isRejected()&&(O.rejectionReason=this.reason(),O.isRejected=!0),O},i.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new z(this).promise()},i.prototype.error=function(O){return this.caught(L.originatesFromRejection,O)},i.getNewLibraryCopy=A.exports,i.is=function(O){return O instanceof i},i.fromNode=i.fromCallback=function(O){var A=new i(b);A._captureStackTrace();var D=arguments.length>1&&!!Object(arguments[1]).multiArgs,V=it(O)(et(A,D));return V===rt&&A._rejectCallback(V.e,!0),A._isFateSealed()||A._setAsyncGuaranteed(),A},i.all=function(O){return new z(O).promise()},i.cast=function(O){var A=G(O);return A instanceof i||((A=new i(b))._captureStackTrace(),A._setFulfilled(),A._rejectionHandler0=O),A},i.resolve=i.fulfilled=i.cast,i.reject=i.rejected=function(O){var A=new i(b);return A._captureStackTrace(),A._rejectCallback(O,!0),A},i.setScheduler=function(O){if("function"!=typeof O)throw new M("expecting a function but got "+L.classString(O));return B.setScheduler(O)},i.prototype._then=function(O,A,V,H,N){var U=void 0!==N,M=U?N:new i(b),Q=this._target(),$=Q._bitField;U||(M._propagateFrom(this,3),M._captureStackTrace(),void 0===H&&0!=(2097152&this._bitField)&&(H=0!=(50397184&$)?this._boundValue():Q===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,M));var G=D();if(0!=(50397184&$)){var z,X,W=Q._settlePromiseCtx;0!=(33554432&$)?(X=Q._rejectionHandler0,z=O):0!=(16777216&$)?(X=Q._fulfillmentHandler0,z=A,Q._unsetRejectionIsUnhandled()):(W=Q._settlePromiseLateCancellationObserver,X=new q("late cancellation observer"),Q._attachExtraTrace(X),z=A),B.invoke(W,Q,{handler:null===G?z:"function"==typeof z&&L.domainBind(G,z),promise:M,receiver:H,value:X})}else Q._addCallbacks(O,A,M,H,G);return M},i.prototype._length=function(){return 65535&this._bitField},i.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},i.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},i.prototype._setLength=function(O){this._bitField=-65536&this._bitField|65535&O},i.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},i.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},i.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},i.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},i.prototype._isFinal=function(){return(4194304&this._bitField)>0},i.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},i.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},i.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},i.prototype._setAsyncGuaranteed=function(){B.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},i.prototype._receiverAt=function(O){var A=0===O?this._receiver0:this[4*O-4+3];return A===V?void 0:void 0===A&&this._isBound()?this._boundValue():A},i.prototype._promiseAt=function(O){return this[4*O-4+2]},i.prototype._fulfillmentHandlerAt=function(O){return this[4*O-4+0]},i.prototype._rejectionHandlerAt=function(O){return this[4*O-4+1]},i.prototype._boundValue=function(){},i.prototype._migrateCallback0=function(O){var A=(O._bitField,O._fulfillmentHandler0),D=O._rejectionHandler0,L=O._promise0,H=O._receiverAt(0);void 0===H&&(H=V),this._addCallbacks(A,D,L,H,null)},i.prototype._migrateCallbackAt=function(O,A){var D=O._fulfillmentHandlerAt(A),L=O._rejectionHandlerAt(A),H=O._promiseAt(A),N=O._receiverAt(A);void 0===N&&(N=V),this._addCallbacks(D,L,H,N,null)},i.prototype._addCallbacks=function(O,A,D,V,H){var N=this._length();if(N>=65531&&(N=0,this._setLength(0)),0===N)this._promise0=D,this._receiver0=V,"function"==typeof O&&(this._fulfillmentHandler0=null===H?O:L.domainBind(H,O)),"function"==typeof A&&(this._rejectionHandler0=null===H?A:L.domainBind(H,A));else{var B=4*N-4;this[B+2]=D,this[B+3]=V,"function"==typeof O&&(this[B+0]=null===H?O:L.domainBind(H,O)),"function"==typeof A&&(this[B+1]=null===H?A:L.domainBind(H,A))}return this._setLength(N+1),N},i.prototype._proxy=function(O,A){this._addCallbacks(void 0,void 0,A,O,null)},i.prototype._resolveCallback=function(O,A){if(0==(117506048&this._bitField)){if(O===this)return this._rejectCallback(l(),!1);var D=G(O,this);if(!(D instanceof i))return this._fulfill(O);A&&this._propagateFrom(D,2);var V=D._target();if(V===this)return void this._reject(l());var L=V._bitField;if(0==(50397184&L)){var H=this._length();H>0&&V._migrateCallback0(this);for(var N=1;H>N;++N)V._migrateCallbackAt(this,N);this._setFollowing(),this._setLength(0),this._setFollowee(V)}else if(0!=(33554432&L))this._fulfill(V._value());else if(0!=(16777216&L))this._reject(V._reason());else{var B=new q("late cancellation observer");V._attachExtraTrace(B),this._reject(B)}}},i.prototype._rejectCallback=function(O,A,D){var V=L.ensureErrorObject(O),H=V===O;if(!H&&!D&&J.warnings()){var N="a promise was rejected with a non-error: "+L.classString(O);this._warn(N,!0)}this._attachExtraTrace(V,!!A&&H),this._reject(O)},i.prototype._resolveFromExecutor=function(O){var A=this;this._captureStackTrace(),this._pushContext();var D=!0,V=this._execute(O,(function(O){A._resolveCallback(O)}),(function(O){A._rejectCallback(O,D)}));D=!1,this._popContext(),void 0!==V&&A._rejectCallback(V,!0)},i.prototype._settlePromiseFromHandler=function(O,A,D,V){var H=V._bitField;if(0==(65536&H)){var N;V._pushContext(),A===Q?D&&"number"==typeof D.length?N=it(O).apply(this._boundValue(),D):(N=rt).e=new M("cannot .spread() a non-array: "+L.classString(D)):N=it(O).call(A,D);var B=V._popContext();0==(65536&(H=V._bitField))&&(N===$?V._reject(D):N===rt?V._rejectCallback(N.e,!1):(J.checkForgottenReturns(N,B,"",V,this),V._resolveCallback(N)))}},i.prototype._target=function(){for(var O=this;O._isFollowing();)O=O._followee();return O},i.prototype._followee=function(){return this._rejectionHandler0},i.prototype._setFollowee=function(O){this._rejectionHandler0=O},i.prototype._settlePromise=function(O,A,D,V){var L=O instanceof i,H=this._bitField,N=0!=(134217728&H);0!=(65536&H)?(L&&O._invokeInternalOnCancel(),D instanceof Y&&D.isFinallyHandler()?(D.cancelPromise=O,it(A).call(D,V)===rt&&O._reject(rt.e)):A===u?O._fulfill(u.call(D)):D instanceof n?D._promiseCancelled(O):L||O instanceof z?O._cancel():D.cancel()):"function"==typeof A?L?(N&&O._setAsyncGuaranteed(),this._settlePromiseFromHandler(A,D,V,O)):A.call(D,V,O):D instanceof n?D._isResolved()||(0!=(33554432&H)?D._promiseFulfilled(V,O):D._promiseRejected(V,O)):L&&(N&&O._setAsyncGuaranteed(),0!=(33554432&H)?O._fulfill(V):O._reject(V))},i.prototype._settlePromiseLateCancellationObserver=function(O){var A=O.handler,D=O.promise,V=O.receiver,L=O.value;"function"==typeof A?D instanceof i?this._settlePromiseFromHandler(A,V,L,D):A.call(V,L,D):D instanceof i&&D._reject(L)},i.prototype._settlePromiseCtx=function(O){this._settlePromise(O.promise,O.handler,O.receiver,O.value)},i.prototype._settlePromise0=function(O,A,D){var V=this._promise0,L=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(V,O,L,A)},i.prototype._clearCallbackDataAtIndex=function(O){var A=4*O-4;this[A+2]=this[A+3]=this[A+0]=this[A+1]=void 0},i.prototype._fulfill=function(O){var A=this._bitField;if(!((117506048&A)>>>16)){if(O===this){var D=l();return this._attachExtraTrace(D),this._reject(D)}this._setFulfilled(),this._rejectionHandler0=O,(65535&A)>0&&(0!=(134217728&A)?this._settlePromises():B.settlePromises(this))}},i.prototype._reject=function(O){var A=this._bitField;if(!((117506048&A)>>>16))return this._setRejected(),this._fulfillmentHandler0=O,this._isFinal()?B.fatalError(O,L.isNode):void((65535&A)>0?B.settlePromises(this):this._ensurePossibleRejectionHandled())},i.prototype._fulfillPromises=function(O,A){for(var D=1;O>D;D++){var V=this._fulfillmentHandlerAt(D),L=this._promiseAt(D),H=this._receiverAt(D);this._clearCallbackDataAtIndex(D),this._settlePromise(L,V,H,A)}},i.prototype._rejectPromises=function(O,A){for(var D=1;O>D;D++){var V=this._rejectionHandlerAt(D),L=this._promiseAt(D),H=this._receiverAt(D);this._clearCallbackDataAtIndex(D),this._settlePromise(L,V,H,A)}},i.prototype._settlePromises=function(){var O=this._bitField,A=65535&O;if(A>0){if(0!=(16842752&O)){var D=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,D,O),this._rejectPromises(A,D)}else{var V=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,V,O),this._fulfillPromises(A,V)}this._setLength(0)}this._clearCancellationData()},i.prototype._settledValue=function(){var O=this._bitField;return 0!=(33554432&O)?this._rejectionHandler0:0!=(16777216&O)?this._fulfillmentHandler0:void 0},i.defer=i.pending=function(){return J.deprecated("Promise.defer","new Promise"),{promise:new i(b),resolve:o,reject:s}},L.notEnumerableProp(i,"_makeSelfResolutionError",l),O("./method")(i,b,G,p,J),O("./bind")(i,b,G,J),O("./cancel")(i,z,p,J),O("./direct_resolve")(i),O("./synchronous_inspection")(i),O("./join")(i,z,G,b,B,D),i.Promise=i,i.version="3.4.7",O("./map.js")(i,z,p,G,b,J),O("./call_get.js")(i),O("./using.js")(i,p,G,W,b,J),O("./timers.js")(i,b,J),O("./generators.js")(i,p,b,G,n,J),O("./nodeify.js")(i),O("./promisify.js")(i,b),O("./props.js")(i,z,G,p),O("./race.js")(i,b,G,p),O("./reduce.js")(i,z,p,G,b,J),O("./settle.js")(i,z,J),O("./some.js")(i,z,p),O("./filter.js")(i,b),O("./each.js")(i,b),O("./any.js")(i),L.toFastProperties(i),L.toFastProperties(i.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a((function(){})),a(void 0),a(!1),a(new i(b)),J.setBounds(N.firstLineError,L.lastLineError),i}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(O,A,D){A.exports=function(A,D,V,L,H){function a(O){var V=this._promise=new A(D);O instanceof A&&V._propagateFrom(O,3),V._setOnCancel(this),this._values=O,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var N=O("./util");return N.isArray,N.inherits(a,H),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function l(O,D){var H=V(this._values,this._promise);if(H instanceof A){var B=(H=H._target())._bitField;if(this._values=H,0==(50397184&B))return this._promise._setAsyncGuaranteed(),H._then(l,this._reject,void 0,this,D);if(0==(33554432&B))return 0!=(16777216&B)?this._reject(H._reason()):this._cancel();H=H._value()}if(null!==(H=N.asArray(H)))return 0===H.length?void(-5===D?this._resolveEmptyArray():this._resolve(function s(O){switch(O){case-2:return[];case-3:return{}}}(D))):void this._iterate(H);var U=L("expecting an array or an iterable object but got "+N.classString(H)).reason();this._promise._rejectCallback(U,!1)},a.prototype._iterate=function(O){var D=this.getActualLength(O.length);this._length=D,this._values=this.shouldCopyValues()?new Array(D):this._values;for(var L=this._promise,H=!1,N=null,B=0;D>B;++B){var U=V(O[B],L);U instanceof A?N=(U=U._target())._bitField:N=null,H?null!==N&&U.suppressUnhandledRejections():null!==N?0==(50397184&N)?(U._proxy(this,B),this._values[B]=U):H=0!=(33554432&N)?this._promiseFulfilled(U._value(),B):0!=(16777216&N)?this._promiseRejected(U._reason(),B):this._promiseCancelled(B):H=this._promiseFulfilled(U,B)}H||L._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(O){this._values=null,this._promise._fulfill(O)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(O){this._values=null,this._promise._rejectCallback(O,!1)},a.prototype._promiseFulfilled=function(O,A){return this._values[A]=O,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(O){return this._totalResolved++,this._reject(O),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var O=this._values;if(this._cancel(),O instanceof A)O.cancel();else for(var D=0;D<O.length;++D)O[D]instanceof A&&O[D].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(O){return O},a}},{"./util":36}],24:[function(O,A,D){A.exports=function(A,D){function r(O){return!Q.test(O)}function i(O){try{return!0===O.__isPromisified__}catch(O){return!1}}function o(O,A,D){var V=L.getDataPropertyOrDefault(O,A+D,q);return!!V&&i(V)}function a(O,A,D,V){for(var H=L.inheritedDataKeys(O),N=[],B=0;B<H.length;++B){var U=H[B],q=O[U],Q=V===j||j(U,q,O);"function"!=typeof q||i(q)||o(O,U,A)||!V(U,q,O,Q)||N.push(U,q)}return function s(O,A,D){for(var V=0;V<O.length;V+=2){var L=O[V];if(D.test(L))for(var H=L.replace(D,""),N=0;N<O.length;N+=2)if(O[N]===H)throw new M("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",A))}}(N,A,D),N}function l(O,A,D,H,N){for(var B=new RegExp(E(A)+"$"),U=a(O,A,B,D),M=0,q=U.length;q>M;M+=2){var Q=U[M],G=U[M+1],z=Q+A;if(H===$)O[z]=$(Q,V,Q,G,A,N);else{var X=H(G,(function(){return $(Q,V,Q,G,A,N)}));L.notEnumerableProp(X,"__isPromisified__",!0),O[z]=X}}return L.toFastProperties(O),O}var V={},L=O("./util"),H=O("./nodeback"),N=L.withAppended,B=L.maybeWrapAsError,U=L.canEvaluate,M=O("./errors").TypeError,q={__isPromisified__:!0},Q=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),j=function(O){return L.isIdentifier(O)&&"_"!==O.charAt(0)&&"constructor"!==O},E=function(O){return O.replace(/([$])/,"\\$")},$=U?undefined:function c(O,U,M,q,Q,$){function c(){var L=U;U===V&&(L=this);var M=new A(D);M._captureStackTrace();var q="string"==typeof z&&this!==G?this[z]:O,Q=H(M,$);try{q.apply(L,N(arguments,Q))}catch(O){M._rejectCallback(B(O),!0,!0)}return M._isFateSealed()||M._setAsyncGuaranteed(),M}var G=function(){return this}(),z=O;return"string"==typeof z&&(O=q),L.notEnumerableProp(c,"__isPromisified__",!0),c};A.promisify=function(O,A){if("function"!=typeof O)throw new M("expecting a function but got "+L.classString(O));if(i(O))return O;var D=function u(O,A,D){return $(O,A,void 0,O,null,D)}(O,void 0===(A=Object(A)).context?V:A.context,!!A.multiArgs);return L.copyDescriptors(O,D,r),D},A.promisifyAll=function(O,A){if("function"!=typeof O&&"object"!=typeof O)throw new M("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var D=!!(A=Object(A)).multiArgs,V=A.suffix;"string"!=typeof V&&(V="Async");var H=A.filter;"function"!=typeof H&&(H=j);var N=A.promisifier;if("function"!=typeof N&&(N=$),!L.isIdentifier(V))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var B=L.inheritedDataKeys(O),U=0;U<B.length;++U){var q=O[B[U]];"constructor"!==B[U]&&L.isClass(q)&&(l(q.prototype,V,H,N,D),l(q,V,H,N,D))}return l(O,V,H,N,D)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(O,A,D){A.exports=function(A,D,V,L){function o(O){var A,D=!1;if(void 0!==H&&O instanceof H)A=M(O),D=!0;else{var V=U.keys(O),L=V.length;A=new Array(2*L);for(var N=0;L>N;++N){var B=V[N];A[N]=O[B],A[N+L]=B}}this.constructor$(A),this._isMap=D,this._init$(void 0,-3)}function s(O){var D,H=V(O);return B(H)?(D=H instanceof A?H._then(A.props,void 0,void 0,void 0,void 0):new o(H).promise(),H instanceof A&&D._propagateFrom(H,2),D):L("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var H,N=O("./util"),B=N.isObject,U=O("./es5");"function"==typeof Map&&(H=Map);var M=function(){function t(D,V){this[O]=D,this[O+A]=V,O++}var O=0,A=0;return function(D){A=D.size,O=0;var V=new Array(2*D.size);return D.forEach(t,V),V}}();N.inherits(o,D),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(O,A){if(this._values[A]=O,++this._totalResolved>=this._length){var D;if(this._isMap)D=function(O){for(var A=new H,D=O.length/2|0,V=0;D>V;++V){var L=O[D+V],N=O[V];A.set(L,N)}return A}(this._values);else{D={};for(var V=this.length(),L=0,N=this.length();N>L;++L)D[this._values[L+V]]=this._values[L]}return this._resolve(D),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(O){return O>>1},A.prototype.props=function(){return s(this)},A.props=function(O){return s(O)}}},{"./es5":13,"./util":36}],26:[function(O,A,D){function i(O){this._capacity=O,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(O){return this._capacity<O},i.prototype._pushOne=function(O){var A=this.length();this._checkCapacity(A+1),this[this._front+A&this._capacity-1]=O,this._length=A+1},i.prototype.push=function(O,A,D){var V=this.length()+3;if(this._willBeOverCapacity(V))return this._pushOne(O),this._pushOne(A),void this._pushOne(D);var L=this._front+V-3;this._checkCapacity(V);var H=this._capacity-1;this[L+0&H]=O,this[L+1&H]=A,this[L+2&H]=D,this._length=V},i.prototype.shift=function(){var O=this._front,A=this[O];return this[O]=void 0,this._front=O+1&this._capacity-1,this._length--,A},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(O){this._capacity<O&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(O){var A=this._capacity;this._capacity=O,function r(O,A,D,V,L){for(var H=0;L>H;++H)D[H+V]=O[H+A],O[H+A]=void 0}(this,0,this,A,this._front+this._length&A-1)},A.exports=i},{}],27:[function(O,A,D){A.exports=function(A,D,V,L){function o(O,N){var B=V(O);if(B instanceof A)return a(B);if(null===(O=H.asArray(O)))return L("expecting an array or an iterable object but got "+H.classString(O));var U=new A(D);void 0!==N&&U._propagateFrom(N,3);for(var M=U._fulfill,q=U._reject,Q=0,$=O.length;$>Q;++Q){var G=O[Q];(void 0!==G||Q in O)&&A.cast(G)._then(M,q,void 0,U,null)}return U}var H=O("./util"),a=function(O){return O.then((function(A){return o(A,O)}))};A.race=function(O){return o(O,void 0)},A.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(O,A,D){A.exports=function(A,D,V,L,H,N){function a(O,D,V,L){this.constructor$(O);var N=B();this._fn=null===N?D:U.domainBind(N,D),void 0!==V&&(V=A.resolve(V))._attachCancellationCallback(this),this._initialValue=V,this._currentCancellable=null,this._eachValues=L===H?Array(this._length):0===L?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function c(O,A){this.isFulfilled()?A._resolve(O):A._reject(O)}function l(O,A,D,L){return"function"!=typeof A?V("expecting a function but got "+U.classString(A)):new a(O,A,D,L).promise()}function u(O){this.accum=O,this.array._gotAccum(O);var D=L(this.value,this.array._promise);return D instanceof A?(this.array._currentCancellable=D,D._then(p,void 0,void 0,this,void 0)):p.call(this,D)}function p(O){var D,V=this.array,L=V._promise,H=M(V._fn);L._pushContext(),(D=void 0!==V._eachValues?H.call(L._boundValue(),O,this.index,this.length):H.call(L._boundValue(),this.accum,O,this.index,this.length))instanceof A&&(V._currentCancellable=D);var B=L._popContext();return N.checkForgottenReturns(D,B,void 0!==V._eachValues?"Promise.each":"Promise.reduce",L),D}var B=A._getDomain,U=O("./util"),M=U.tryCatch;U.inherits(a,D),a.prototype._gotAccum=function(O){void 0!==this._eachValues&&null!==this._eachValues&&O!==H&&this._eachValues.push(O)},a.prototype._eachComplete=function(O){return null!==this._eachValues&&this._eachValues.push(O),this._eachValues},a.prototype._init=function(){},a.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},a.prototype.shouldCopyValues=function(){return!1},a.prototype._resolve=function(O){this._promise._resolveCallback(O),this._values=null},a.prototype._resultCancelled=function(O){return O===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof A&&this._currentCancellable.cancel(),this._initialValue instanceof A&&this._initialValue.cancel()))},a.prototype._iterate=function(O){this._values=O;var D,V,L=O.length;if(void 0!==this._initialValue?(D=this._initialValue,V=0):(D=A.resolve(O[0]),V=1),this._currentCancellable=D,!D.isRejected())for(;L>V;++V){var H={accum:null,value:O[V],index:V,length:L,array:this};D=D._then(u,void 0,void 0,H,void 0)}void 0!==this._eachValues&&(D=D._then(this._eachComplete,void 0,void 0,this,void 0)),D._then(c,c,void 0,D,this)},A.prototype.reduce=function(O,A){return l(this,O,A,null)},A.reduce=function(O,A,D,V){return l(O,A,D,V)}}},{"./util":36}],29:[function(O,A,D){var V,L=O("./util"),H=L.getNativePromise();if(L.isNode&&"undefined"==typeof MutationObserver){var N=global.setImmediate,B=process.nextTick;V=L.isRecentNode?function(O){N.call(global,O)}:function(O){B.call(process,O)}}else if("function"==typeof H&&"function"==typeof H.resolve){var U=H.resolve();V=function(O){U.then(O)}}else V="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(O){setImmediate(O)}:"undefined"!=typeof setTimeout?function(O){setTimeout(O,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var O=document.createElement("div"),A={attributes:!0},D=!1,V=document.createElement("div");new MutationObserver((function(){O.classList.toggle("foo"),D=!1})).observe(V,A);var o=function(){D||(D=!0,V.classList.toggle("foo"))};return function(D){var V=new MutationObserver((function(){V.disconnect(),D()}));V.observe(O,A),o()}}();A.exports=V},{"./util":36}],30:[function(O,A,D){A.exports=function(A,D,V){function i(O){this.constructor$(O)}var L=A.PromiseInspection;O("./util").inherits(i,D),i.prototype._promiseResolved=function(O,A){return this._values[O]=A,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(O,A){var D=new L;return D._bitField=33554432,D._settledValueField=O,this._promiseResolved(A,D)},i.prototype._promiseRejected=function(O,A){var D=new L;return D._bitField=16777216,D._settledValueField=O,this._promiseResolved(A,D)},A.settle=function(O){return V.deprecated(".settle()",".reflect()"),new i(O).promise()},A.prototype.settle=function(){return A.settle(this)}}},{"./util":36}],31:[function(O,A,D){A.exports=function(A,D,V){function i(O){this.constructor$(O),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(O,A){if((0|A)!==A||0>A)return V("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var D=new i(O),L=D.promise();return D.setHowMany(A),D.init(),L}var L=O("./util"),H=O("./errors").RangeError,N=O("./errors").AggregateError,B=L.isArray,U={};L.inherits(i,D),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var O=B(this._values);!this._isResolved()&&O&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(O){this._howMany=O},i.prototype._promiseFulfilled=function(O){return this._addFulfilled(O),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(O){return this._addRejected(O),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof A||null==this._values?this._cancel():(this._addRejected(U),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var O=new N,A=this.length();A<this._values.length;++A)this._values[A]!==U&&O.push(this._values[A]);return O.length>0?this._reject(O):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(O){this._values.push(O)},i.prototype._addFulfilled=function(O){this._values[this._totalResolved++]=O},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(O){var A="Input array must contain at least "+this._howMany+" items but contains only "+O+" items";return new H(A)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},A.some=function(O,A){return o(O,A)},A.prototype.some=function(O){return o(this,O)},A._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(O,A,D){A.exports=function(O){function e(O){void 0!==O?(O=O._target(),this._bitField=O._bitField,this._settledValueField=O._isFateSealed()?O._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var A=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},D=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},V=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},L=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},H=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},N=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},O.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},O.prototype._isCancelled=function(){return this._target().__isCancelled()},O.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},O.prototype.isPending=function(){return H.call(this._target())},O.prototype.isRejected=function(){return L.call(this._target())},O.prototype.isFulfilled=function(){return V.call(this._target())},O.prototype.isResolved=function(){return N.call(this._target())},O.prototype.value=function(){return A.call(this._target())},O.prototype.reason=function(){var O=this._target();return O._unsetRejectionIsUnhandled(),D.call(O)},O.prototype._value=function(){return this._settledValue()},O.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},O.PromiseInspection=e}},{}],33:[function(O,A,D){A.exports=function(A,D){function o(O){try{return function i(O){return O.then}(O)}catch(O){return L.e=O,L}}function a(O,H,N){var B=new A(D),U=B;N&&N._pushContext(),B._captureStackTrace(),N&&N._popContext();var M=!0,q=V.tryCatch(H).call(O,(function o(O){B&&(B._resolveCallback(O),B=null)}),(function s(O){B&&(B._rejectCallback(O,M,!0),B=null)}));return M=!1,B&&q===L&&(B._rejectCallback(q.e,!0,!0),B=null),U}var V=O("./util"),L=V.errorObj,H=V.isObject,N={}.hasOwnProperty;return function r(O,V){if(H(O)){if(O instanceof A)return O;var B=o(O);if(B===L){V&&V._pushContext();var U=A.reject(B.e);return V&&V._popContext(),U}if("function"==typeof B){if(function s(O){try{return N.call(O,"_promise0")}catch(O){return!1}}(O)){U=new A(D);return O._then(U._fulfill,U._reject,void 0,U,null),U}return a(O,B,V)}}return O}}},{"./util":36}],34:[function(O,A,D){A.exports=function(A,D,V){function i(O){this.handle=O}function o(O){return clearTimeout(this.handle),O}function s(O){throw clearTimeout(this.handle),O}var L=O("./util"),H=A.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var l=function(O){return N(+this).thenReturn(O)},N=A.delay=function(O,L){var H,N;return void 0!==L?(H=A.resolve(L)._then(l,null,null,O,void 0),V.cancellation()&&L instanceof A&&H._setOnCancel(L)):(H=new A(D),N=setTimeout((function(){H._fulfill()}),+O),V.cancellation()&&H._setOnCancel(new i(N)),H._captureStackTrace()),H._setAsyncGuaranteed(),H};A.prototype.delay=function(O){return N(O,this)};var p=function(O,A,D){var V;V="string"!=typeof A?A instanceof Error?A:new H("operation timed out"):new H(A),L.markAsOriginatingFromRejection(V),O._attachExtraTrace(V),O._reject(V),null!=D&&D.cancel()};A.prototype.timeout=function(O,A){O=+O;var D,L,H=new i(setTimeout((function(){D.isPending()&&p(D,A,L)}),O));return V.cancellation()?(L=this.then(),(D=L._then(o,s,void 0,H,void 0))._setOnCancel(H)):D=this._then(o,s,void 0,H,void 0),D}}},{"./util":36}],35:[function(O,A,D){A.exports=function(A,D,V,L,H,N){function a(O){setTimeout((function(){throw O}),0)}function l(O,D){var L=0,N=O.length,B=new A(H);return function i(){if(L>=N)return B._fulfill();var H=function c(O){var A=V(O);return A!==O&&"function"==typeof O._isDisposable&&"function"==typeof O._getDisposer&&O._isDisposable()&&A._setDisposable(O._getDisposer()),A}(O[L++]);if(H instanceof A&&H._isDisposable()){try{H=V(H._getDisposer().tryDispose(D),O.promise)}catch(O){return a(O)}if(H instanceof A)return H._then(i,a,null,null,null)}i()}(),B}function u(O,A,D){this._data=O,this._promise=A,this._context=D}function p(O,A,D){this.constructor$(O,A,D)}function h(O){return u.isDisposer(O)?(this.resources[this.index]._setDisposable(O),O.promise()):O}function f(O){this.length=O,this.promise=null,this[O-1]=null}var B=O("./util"),U=O("./errors").TypeError,M=O("./util").inherits,q=B.errorObj,Q=B.tryCatch,$={};u.prototype.data=function(){return this._data},u.prototype.promise=function(){return this._promise},u.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():$},u.prototype.tryDispose=function(O){var A=this.resource(),D=this._context;void 0!==D&&D._pushContext();var V=A!==$?this.doDispose(A,O):null;return void 0!==D&&D._popContext(),this._promise._unsetDisposable(),this._data=null,V},u.isDisposer=function(O){return null!=O&&"function"==typeof O.resource&&"function"==typeof O.tryDispose},M(p,u),p.prototype.doDispose=function(O,A){return this.data().call(O,O,A)},f.prototype._resultCancelled=function(){for(var O=this.length,D=0;O>D;++D){var V=this[D];V instanceof A&&V.cancel()}},A.using=function(){var O=arguments.length;if(2>O)return D("you must pass at least 2 arguments to Promise.using");var L=arguments[O-1];if("function"!=typeof L)return D("expecting a function but got "+B.classString(L));var H,U=!0;2===O&&Array.isArray(arguments[0])?(O=(H=arguments[0]).length,U=!1):(H=arguments,O--);for(var M=new f(O),$=0;O>$;++$){var G=H[$];if(u.isDisposer(G)){var z=G;(G=G.promise())._setDisposable(z)}else{var X=V(G);X instanceof A&&(G=X._then(h,null,null,{resources:M,index:$},void 0))}M[$]=G}var W=new Array(M.length);for($=0;$<W.length;++$)W[$]=A.resolve(M[$]).reflect();var J=A.all(W).then((function(O){for(var A=0;A<O.length;++A){var D=O[A];if(D.isRejected())return q.e=D.error(),q;if(!D.isFulfilled())return void J.cancel();O[A]=D.value()}Y._pushContext(),L=Q(L);var V=U?L.apply(void 0,O):L(O),H=Y._popContext();return N.checkForgottenReturns(V,H,"Promise.using",Y),V})),Y=J.lastly((function(){var O=new A.PromiseInspection(J);return l(M,O)}));return M.promise=Y,Y._setOnCancel(M),Y},A.prototype._setDisposable=function(O){this._bitField=131072|this._bitField,this._disposer=O},A.prototype._isDisposable=function(){return(131072&this._bitField)>0},A.prototype._getDisposer=function(){return this._disposer},A.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},A.prototype.disposer=function(O){if("function"==typeof O)return new p(O,this,L());throw new U}}},{"./errors":12,"./util":36}],36:[function(O,A,D){function r(){try{var O=V;return V=null,O.apply(this,arguments)}catch(O){return N.e=O,N}}function o(O){return null==O||!0===O||!1===O||"string"==typeof O||"number"==typeof O}function u(O,A,D){if(o(O))return O;var V={value:D,configurable:!0,enumerable:!1,writable:!0};return L.defineProperty(O,A,V),O}function v(O){try{return O+""}catch(O){return"[no string representation]"}}function y(O){return null!==O&&"object"==typeof O&&"string"==typeof O.message&&"string"==typeof O.name}function b(O){return y(O)&&L.propertyIsWritable(O,"stack")}function w(O){return{}.toString.call(O)}var V,L=O("./es5"),H="undefined"==typeof navigator,N={e:{}},B="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,U=function(){var O=[Array.prototype,Object.prototype,Function.prototype],e=function(A){for(var D=0;D<O.length;++D)if(O[D]===A)return!0;return!1};if(L.isES5){var A=Object.getOwnPropertyNames;return function(O){for(var D=[],V=Object.create(null);null!=O&&!e(O);){var H;try{H=A(O)}catch(O){return D}for(var N=0;N<H.length;++N){var B=H[N];if(!V[B]){V[B]=!0;var U=Object.getOwnPropertyDescriptor(O,B);null!=U&&null==U.get&&null==U.set&&D.push(B)}}O=L.getPrototypeOf(O)}return D}}var D={}.hasOwnProperty;return function(A){if(e(A))return[];var V=[];t:for(var L in A)if(D.call(A,L))V.push(L);else{for(var H=0;H<O.length;++H)if(D.call(O[H],L))continue t;V.push(L)}return V}}(),M=/this\s*\.\s*\S+\s*=/,q=/^[a-z$_][a-z$_0-9]*$/i,Q="stack"in new Error?function(O){return b(O)?O:new Error(v(O))}:function(O){if(b(O))return O;try{throw new Error(v(O))}catch(O){return O}},I=function(O){return L.isArray(O)?O:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var $="function"==typeof Array.from?function(O){return Array.from(O)}:function(O){for(var A,D=[],V=O[Symbol.iterator]();!(A=V.next()).done;)D.push(A.value);return D};I=function(O){return L.isArray(O)?O:null!=O&&"function"==typeof O[Symbol.iterator]?$(O):null}}var G="undefined"!=typeof process&&"[object process]"===w(process).toLowerCase(),z="undefined"!=typeof process&&void 0!==process.env,X={isClass:function h(O){try{if("function"==typeof O){var A=L.names(O.prototype),D=L.isES5&&A.length>1,V=A.length>0&&!(1===A.length&&"constructor"===A[0]),H=M.test(O+"")&&L.names(O).length>0;if(D||V||H)return!0}return!1}catch(O){return!1}},isIdentifier:function _(O){return q.test(O)},inheritedDataKeys:U,getDataPropertyOrDefault:function l(O,A,D){if(!L.isES5)return{}.hasOwnProperty.call(O,A)?O[A]:void 0;var V=Object.getOwnPropertyDescriptor(O,A);return null!=V?null==V.get&&null==V.set?V.value:D:void 0},thrower:function p(O){throw O},isArray:L.isArray,asArray:I,notEnumerableProp:u,isPrimitive:o,isObject:function s(O){return"function"==typeof O||"object"==typeof O&&null!==O},isError:y,canEvaluate:H,errorObj:N,tryCatch:function i(O){return V=O,r},inherits:function(O,A){function n(){for(var V in this.constructor=O,this.constructor$=A,A.prototype)D.call(A.prototype,V)&&"$"!==V.charAt(V.length-1)&&(this[V+"$"]=A.prototype[V])}var D={}.hasOwnProperty;return n.prototype=A.prototype,O.prototype=new n,O.prototype},withAppended:function c(O,A){var D,V=O.length,L=new Array(V+1);for(D=0;V>D;++D)L[D]=O[D];return L[D]=A,L},maybeWrapAsError:function a(O){return o(O)?new Error(v(O)):O},toFastProperties:function f(O){function e(){}e.prototype=O;for(var A=8;A--;)new e;return O},filledRange:function d(O,A,D){for(var V=new Array(O),L=0;O>L;++L)V[L]=A+L+D;return V},toString:v,canAttachTrace:b,ensureErrorObject:Q,originatesFromRejection:function g(O){return null!=O&&(O instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===O.isOperational)},markAsOriginatingFromRejection:function m(O){try{u(O,"isOperational",!0)}catch(O){}},classString:w,copyDescriptors:function C(O,A,D){for(var V=L.names(O),H=0;H<V.length;++H){var N=V[H];if(D(N))try{L.defineProperty(A,N,L.getDescriptor(O,N))}catch(O){}}},hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:G,hasEnvVariables:z,env:function j(O){return z?process.env[O]:void 0},global:B,getNativePromise:function E(){if("function"==typeof Promise)try{var O=new Promise((function(){}));if("[object Promise]"==={}.toString.call(O))return Promise}catch(O){}},domainBind:function k(O,A){return O.bind(A)}};X.isRecentNode=X.isNode&&function(){var O=process.versions.node.split(".").map(Number);return 0===O[0]&&O[1]>10||O[0]>0}(),X.isNode&&X.toFastProperties(process);try{throw new Error}catch(O){X.lastLineError=O}A.exports=X},{"./es5":13}]},{},[4])(4)})),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise);