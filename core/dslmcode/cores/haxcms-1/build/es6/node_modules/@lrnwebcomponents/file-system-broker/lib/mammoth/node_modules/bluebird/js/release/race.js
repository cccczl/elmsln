module.exports=function(r,e,n,t){var a=require("./util");function race(i,o){var u,c=n(i);if(c instanceof r)return(u=c).then((function(r){return race(r,u)}));if(null===(i=a.asArray(i)))return t("expecting an array or an iterable object but got "+a.classString(i));var l=new r(e);void 0!==o&&l._propagateFrom(o,3);for(var f=l._fulfill,v=l._reject,s=0,d=i.length;s<d;++s){var p=i[s];(void 0!==p||s in i)&&r.cast(p)._then(f,v,void 0,l,null)}return l}r.race=function(r){return race(r,void 0)},r.prototype.race=function(){return race(this,void 0)}};