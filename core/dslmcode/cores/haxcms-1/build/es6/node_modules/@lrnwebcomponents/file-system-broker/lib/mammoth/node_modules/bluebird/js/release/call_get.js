var e=Object.create;if(e){var t=e(null),n=e(null);t[" size"]=n[" size"]=0}module.exports=function(e){var r,i,o=require("./util"),u=o.canEvaluate,a=o.isIdentifier,makeMethodCaller=function(e){return new Function("ensureMethod","                                    \n        return function(obj) {                                               \n            'use strict'                                                     \n            var len = this.length;                                           \n            ensureMethod(obj, 'methodName');                                 \n            switch(len) {                                                    \n                case 1: return obj.methodName(this[0]);                      \n                case 2: return obj.methodName(this[0], this[1]);             \n                case 3: return obj.methodName(this[0], this[1], this[2]);    \n                case 0: return obj.methodName();                             \n                default:                                                     \n                    return obj.methodName.apply(obj, this);                  \n            }                                                                \n        };                                                                   \n        ".replace(/methodName/g,e))(ensureMethod)},makeGetter=function(e){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",e))},getCompiled=function(e,t,n){var r=n[e];if("function"!=typeof r){if(!a(e))return null;if(r=t(e),n[e]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};function ensureMethod(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+o.classString(t)+" has no method '"+o.toString(n)+"'";throw new e.TypeError(i)}return r}function caller(e){return ensureMethod(e,this.pop()).apply(e,this)}function namedGetter(e){return e[this]}function indexedGetter(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}r=function(e){return getCompiled(e,makeMethodCaller,t)},i=function(e){return getCompiled(e,makeGetter,n)},e.prototype.call=function(e){for(var t=arguments.length,n=new Array(Math.max(t-1,0)),i=1;i<t;++i)n[i-1]=arguments[i];if(u){var o=r(e);if(null!==o)return this._then(o,void 0,void 0,n,void 0)}return n.push(e),this._then(caller,void 0,void 0,n,void 0)},e.prototype.get=function(e){var t;if("number"==typeof e)t=indexedGetter;else if(u){var n=i(e);t=null!==n?n:namedGetter}else t=namedGetter;return this._then(t,void 0,void 0,e,void 0)}};