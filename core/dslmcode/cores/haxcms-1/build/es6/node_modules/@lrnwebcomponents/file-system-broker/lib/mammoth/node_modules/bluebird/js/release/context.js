module.exports=function(t){var e=!1,o=[];function Context(){this._trace=new Context.CapturedTrace(peekContext())}function peekContext(){var t=o.length-1;if(t>=0)return o[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},Context.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},Context.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},Context.CapturedTrace=null,Context.create=function createContext(){if(e)return new Context},Context.deactivateLongStackTraces=function(){},Context.activateLongStackTraces=function(){var o=t.prototype._pushContext,p=t.prototype._popContext,n=t._peekContext,r=t.prototype._peekContext,C=t.prototype._promiseCreated;Context.deactivateLongStackTraces=function(){t.prototype._pushContext=o,t.prototype._popContext=p,t._peekContext=n,t.prototype._peekContext=r,t.prototype._promiseCreated=C,e=!1},e=!0,t.prototype._pushContext=Context.prototype._pushContext,t.prototype._popContext=Context.prototype._popContext,t._peekContext=t.prototype._peekContext=peekContext,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},Context};