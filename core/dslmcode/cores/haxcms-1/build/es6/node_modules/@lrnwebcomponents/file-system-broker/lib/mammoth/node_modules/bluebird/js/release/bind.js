module.exports=function(t,e,i,o){var n=!1,rejectThis=function(t,e){this._reject(e)},targetRejected=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(rejectThis,rejectThis,null,this,t)},bindingResolved=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},bindingRejected=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(r){n||(n=!0,t.prototype._propagateFrom=o.propagateFromFunction(),t.prototype._boundValue=o.boundValueFunction());var u=i(r),s=new t(e);s._propagateFrom(this,1);var d=this._target();if(s._setBoundTo(u),u instanceof t){var _={promiseRejectionQueued:!1,promise:s,target:d,bindingPromise:u};d._then(e,targetRejected,void 0,s,_),u._then(bindingResolved,bindingRejected,void 0,s,_),s._setOnCancel(u)}else s._resolveCallback(d);return s},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,i){return t.resolve(i).bind(e)}};