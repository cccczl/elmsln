import r from"./_SetCache.js";import a from"./_arrayIncludes.js";import t from"./_arrayIncludesWith.js";import e from"./_arrayMap.js";import o from"./_baseUnary.js";import n from"./_cacheHas.js";var s=Math.min;function baseIntersection(i,f,m){for(var h=m?t:a,p=i[0].length,c=i.length,l=c,u=Array(c),v=1/0,j=[];l--;){var _=i[l];l&&f&&(_=e(_,o(f))),v=s(_.length,v),u[l]=!m&&(f||p>=120&&_.length>=120)?new r(l&&_):void 0}_=i[0];var g=-1,y=u[0];r:for(;++g<p&&j.length<v;){var d=_[g],I=f?f(d):d;if(d=m||0!==d?d:0,!(y?n(y,I):h(j,I,m))){for(l=c;--l;){var b=u[l];if(!(b?n(b,I):h(i[l],I,m)))continue r}y&&y.push(I),j.push(d)}}return j}export default baseIntersection;